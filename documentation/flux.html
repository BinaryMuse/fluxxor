<!doctype html>
<html lang="en">

<meta charset="utf-8">
<title>Fluxxor - Fluxxor.Flux</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta property="og:image" content="http://fluxxor.com/fluxxor.png">
<meta property="og:site_name" content="Fluxxor">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="">
<meta name="twitter:title" content="Fluxxor">
<meta name="twitter:description" content="Fluxxor is a set of tools to facilitate building JavaScript data layers using the Flux architecture.">
<meta name="twitter:creator" content="BinaryMuse">
<meta name="twitter:image:src" content="http://fluxxor.com/fluxxor.png">
<meta name="twitter:domain" content="">
<meta name="twitter:app:name:iphone" content="">
<meta name="twitter:app:name:ipad" content="">
<meta name="twitter:app:name:googleplay" content="">
<meta name="twitter:app:url:iphone" content="">
<meta name="twitter:app:url:ipad" content="">
<meta name="twitter:app:url:googleplay" content="">
<meta name="twitter:app:id:iphone" content="">
<meta name="twitter:app:id:ipad" content="">
<meta name="twitter:app:id:googleplay" content="">
<link rel="stylesheet" href="http://yandex.st/highlightjs/8.0/styles/default.min.css">
<script src="http://cdnjs.cloudflare.com/ajax/libs/es5-shim/3.4.0/es5-shim.min.js"></script>
<script src="http://yandex.st/highlightjs/8.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<link rel="stylesheet" type="text/css" href="/style/main.css">

<a class="github-banner" href="https://github.com/BinaryMuse/fluxxor"><img style="position: fixed; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/a6677b08c955af8400f44c6298f40e7d19cc5b2d/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677261795f3664366436642e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"></a>

<div class="wrapper">
  <header>
    <div class="logo-container-sidebar">
      <a href="/"><img src="/fluxxor.svg" alt="Fluxxor" title="Fluxxor" class="logo-svg"></a>
    </div>
    <div class="show-hide-nav">
      <a href="#" class="show-nav">Show Navigation</a>
      <a href="#" class="hide-nav">Hide Navigation</a>
    </div>
    <div class="nav-list">
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/what-is-flux.html">What is Flux?</a></li>
        <li><a href="/guides/">Guides</a></li>
        <ul>
          <li><a href="/guides/installation.html">Installation</a></li>
          <li><a href="/guides/react.html">Using with React</a></li>
          <li><a href="/guides/quick-start.html">Quick-Start Guide</a></li>
          <li><a href="/guides/async-data.html">Dealing with Asynchronous Data</a></li>
          <li><a href="/guides/routing.html">Routing</a></li>
        </ul>
        <li><a href="/examples/">Examples</a></li>
        <ul>
          <li><a href="/guides/quick-start.html">Basic Todos</a></li>
          <li><a href="/examples/carousel/">Image Carousel</a></li>
          <li><a href="/guides/async-data.html">Asynchronous Data</a></li>
          <li><a href="/examples/react-router.html">React Router</a></li>
        </ul>
        <li><a href="/documentation/">Documentation</a></li>
        <ul>
          <li><a href="/documentation/flux.html">Fluxxor.Flux</a></li>
          <li><a href="/documentation/stores.html">Stores</a></li>
          <li><a href="/documentation/actions.html">Actions</a></li>
          <li><a href="/documentation/flux-mixin.html">Fluxxor.FluxMixin</a></li>
          <li><a href="/documentation/store-watch-mixin.html">Fluxxor.StoreWatchMixin</a></li>
        </ul>
        <li><a href="/faq.html">FAQ</a></li>
        <li><a href="/changelog.html">Changelog</a></li>
        <li><a href="https://github.com/BinaryMuse/fluxxor">View on GitHub</a></li>
      </ul>
      <p>
        <a href="https://gitter.im/BinaryMuse/fluxxor">Support and chat on Gitter</a><br>
        <a href="https://gitter.im/BinaryMuse/fluxxor"><img src="https://badges.gitter.im/BinaryMuse/fluxxor.png"></a>
      </p>
    </div>
    <div class="sidebar-info">
      <hr>
      <p>Copyright &copy; 2014 <a href="https://github.com/BinaryMuse/">Brandon Tilley</a><br>
      Licensed under <a href="http://opensource.org/licenses/MIT">the MIT license</a></p>
    </div>
  </header>
  <section>
    <h1 id="fluxxor-flux">Fluxxor.Flux</h1>
<p><code>Fluxxor.Flux</code> is the main container object for a Flux application. It provides access to the <a href="/documentation/stores.html">stores</a> and the <a href="/documentation/actions.html">actions</a>, and is responsible for managing the dispatcher internally.</p>
<h2 id="-new-fluxxor-flux-stores-actions-"><code>new Fluxxor.Flux(stores, actions)</code></h2>
<p>Creates a new <code>Flux</code> instance.</p>
<ul>
<li><code>stores</code> - An object map of store names to store instances. Stores can be retrieved later by their name. See <a href="/documentation/stores.html">Stores</a> for more information.</li>
<li><code>actions</code> - An object map of action names to action functions. See <a href="/documentation/actions.html">Actions</a> for more information.</li>
</ul>
<p>Example:</p>
<pre><code class="lang-javascript"><span class="keyword">var</span> stores = {
  MyStore: <span class="keyword">new</span> MyStore({options: here}),
  OtherStore: <span class="keyword">new</span> OtherStore({options: here})
};

<span class="keyword">var</span> actions = {
  processThing: <span class="function"><span class="keyword">function</span><span class="params">(thing)</span> </span>{
    <span class="keyword">this</span>.dispatch(<span class="string">"PROCESS_THING"</span>, {thing: thing});
  }
};

<span class="keyword">var</span> flux = <span class="keyword">new</span> Fluxxor.Flux(stores, actions);
</code></pre>
<h2 id="-fluxxor-flux-store-name-"><code>Fluxxor.Flux#store(name)</code></h2>
<p>Retrieves a store by its name.</p>
<ul>
<li><code>name</code> - The name of the store as passed to the <code>Flux</code> constructor.</li>
</ul>
<p>Example:</p>
<pre><code class="lang-javascript"><span class="keyword">var</span> stores = {
  MyStore: <span class="keyword">new</span> MyStore();
};

<span class="keyword">var</span> flux = <span class="keyword">new</span> Fluxxor.Flux(stores, actions);

<span class="keyword">var</span> myStore = flux.store(<span class="string">"MyStore"</span>);
</code></pre>
<h2 id="-fluxxor-flux-getallstores-"><code>Fluxxor.Flux#getAllStores()</code></h2>
<p>Retrieves all stores. The return value is an object where the keys are the names of the stores and the values are the stores themselves.</p>
<p><strong>Note:</strong> This is a reference to the underlying stores implementation, and should not be modified.</p>
<h2 id="-fluxxor-flux-actions-"><code>Fluxxor.Flux#actions</code></h2>
<p>Retrieves the map of actions.</p>
<p>Example:</p>
<pre><code class="lang-javascript"><span class="keyword">var</span> actions = {
  processThing: <span class="function"><span class="keyword">function</span><span class="params">(thing)</span> </span>{
    <span class="keyword">this</span>.dispatch(<span class="string">"PROCESS_THING"</span>, {thing: thing});
  }
};

<span class="keyword">var</span> flux = <span class="keyword">new</span> Fluxxor.Flux(stores, actions);

flux.actions.processThing(myThing);
</code></pre>
<h2 id="-fluxxor-flux-addstore-name-store-"><code>Fluxxor.Flux#addStore(name, store)</code></h2>
<p>Adds a new store to the <code>Flux</code> instance.</p>
<ul>
<li><code>name</code> - The name used to identify the store. Stores can be retrieved later by their name. See <a href="/documentation/stores.html">Stores</a> for more information.</li>
<li><code>store</code> - The store instance to add.</li>
</ul>
<pre><code class="lang-javascript">flux.addStore(<span class="string">"user"</span>, <span class="keyword">new</span> UserStore());
</code></pre>
<h2 id="-fluxxor-flux-addstores-stores-"><code>Fluxxor.Flux#addStores(stores)</code></h2>
<p>Adds stores to the <code>Flux</code> instance.</p>
<ul>
<li><code>stores</code> - A hash of stores to add, in the same format as the <code>Fluxxor.Flux</code> constructor.</li>
</ul>
<pre><code class="lang-javascript"><span class="keyword">var</span> newStores = {
  user: <span class="keyword">new</span> UserStore(),
  post: <span class="keyword">new</span> PostStore()
};

flux.addStores(newStores);
</code></pre>
<h2 id="-fluxxor-flux-addaction-path-function-"><code>Fluxxor.Flux#addAction(path..., function)</code></h2>
<p>Adds an action to the <code>Flux</code> instance&#39;s action hash. This function takes a path (either as an array of strings or as individual strings) followed by a function.</p>
<ul>
<li><code>path...</code> - The path in the actions object to add the action.</li>
<li><code>function</code> - The action function to add.</li>
</ul>
<p><code>path</code> can be specified either as an array of strings where each element is one part of the path, or as a free list of strings. For example:</p>
<pre><code class="lang-javascript"><span class="comment">// The action hash we want to end up with:</span>
{
  user: {
    login: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{ ... }
  }
}

<span class="comment">// Path as an array</span>
flux.addAction([<span class="string">"user"</span>, <span class="string">"login"</span>], <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{ ... });

<span class="comment">// Path as free arguments</span>
flux.addAction(<span class="string">"user"</span>, <span class="string">"login"</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{ ... });
</code></pre>
<p>Fluxxor will automatically create any intermediary objects as necessary, and will intelligently merge the new action into the existing hash, but does not allow overwriting any existing functions.</p>
<h2 id="-fluxxor-flux-addactions-actions-"><code>Fluxxor.Flux#addActions(actions)</code></h2>
<p>Adds actions to the <code>Flux</code> instance&#39;s action hash.</p>
<ul>
<li><code>actions</code> - A hash of actions to add, in the same format as the <code>Fluxxor.Flux</code> constructor.</li>
</ul>
<pre><code class="lang-javascript"><span class="keyword">var</span> newActions = {
  user: {
    login: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{ ... },
    logout: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{ ... }
  }
};

flux.addActions(newActions);
</code></pre>
<p>Fluxxor will intelligently merge the new actions with the existing actions, but does not allow overwriting any existing functions.</p>
<h2 id="-fluxxor-flux-setdispatchinterceptor-interceptor-"><code>Fluxxor.Flux#setDispatchInterceptor(interceptor)</code></h2>
<p>Sets <code>interceptor</code> as the <code>Flux</code> instance&#39;s dispatch interceptor. The dispatch interceptor allows you to surround or replace the action dispatch with custom functionality.</p>
<ul>
<li><code>interceptor</code> - A function with the signature <code>function(action, dispatch)</code> where <code>action</code> is the action being dispatched and <code>dispatch</code> is the original (non-intercepted) dispatch function. If a falsy value, resets the dispatch interceptor to the default (no-op) interceptor.</li>
</ul>
<p>Sometimes it&#39;s useful to inject custom logic into the normal dispatch flow. <code>setDispatchInterceptor</code> allows you to wrap or replace the original dispatch function with your own logic. The default dispatch interceptor is essentially a no-op:</p>
<pre><code class="lang-javascript">flux.setDispatchInterceptor(<span class="function"><span class="keyword">function</span><span class="params">(action, dispatch)</span> </span>{
  dispatch(action);
});
</code></pre>
<p>In particular, it can be very useful to wrap action dispatches in React&#39;s batched updates (if you&#39;re using React). To do so, wrap the dispatch in <code>React.addons.batchedUpdates</code>:</p>
<pre><code class="lang-javascript">flux.setDispatchInterceptor(<span class="function"><span class="keyword">function</span><span class="params">(action, dispatch)</span> </span>{
  React.addons.batchedUpdates(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{
    dispatch(action);
  });
});
</code></pre>
<p>(See the <a href="/guides/react.html">Using with React page</a> for more information on how <code>batchedUpdates</code> can help.)</p>
<p>You can even bypass the original dispatch function entirely for testing or more exotic implementations:</p>
<pre><code class="lang-javascript">flux.setDispatchInterceptor(<span class="function"><span class="keyword">function</span><span class="params">(action, dispatch)</span> </span>{
  <span class="comment">// Ignore the `dispatch` argument and do our own thing with the action, for example:</span>
  <span class="built_in">window</span>.postMessage({ type: <span class="string">"myCustomThing"</span>, action: action });
});
</code></pre>
<h2 id="-eventemitter-methods"><code>EventEmitter</code> methods</h2>
<p><code>Flux</code> instances are also instances of EventEmitters, and thus <a href="http://nodejs.org/api/events.html#events_class_events_eventemitter">inherit all the EventEmitter methods</a>. Most notably, <code>Flux</code> instances dispatch a <code>&quot;dispatch&quot;</code> event with <code>type</code> and <code>payload</code> arguments when <code>this.dispatch</code> is called from an action. This is useful for cross-cutting concerns (like logging), and should not be used for managing the flow of data in a Fluxxor application.</p>
<p>Example:</p>
<pre><code class="lang-javascript">flux.on(<span class="string">"dispatch"</span>, <span class="function"><span class="keyword">function</span><span class="params">(type, payload)</span> </span>{
  <span class="built_in">console</span>.log(<span class="string">"Dispatched"</span>, type, payload);
}
</code></pre>
<p>Note that the action will still be dispatched even if the <code>&quot;dispatch&quot;</code> event handler throws an exception.</p>

    <hr>
    See a typo? Something still not clear?
    <a href="https://github.com/BinaryMuse/fluxxor/issues/new">Report an issue on GitHub</a>.
  </section>

  <div class="footer-info">
    <hr>
    <p>Copyright &copy; 2014 <a href="https://github.com/BinaryMuse/">Brandon Tilley</a><br>
    Licensed under <a href="http://opensource.org/licenses/MIT">the MIT license</a><br>
    <a href="https://github.com/BinaryMuse/fluxxor">Available on GitHub</a></p>
  </div>
</div>

<script>
document.querySelectorAll(".show-nav")[0].addEventListener("click", function(ev) {
  ev.preventDefault();
  document.querySelectorAll(".nav-list")[0].style.display = 'block';
  document.querySelectorAll(".show-nav")[0].style.display = 'none';
  document.querySelectorAll(".hide-nav")[0].style.display = 'block';
});

document.querySelectorAll(".hide-nav")[0].addEventListener("click", function(ev) {
  ev.preventDefault();
  document.querySelectorAll(".nav-list")[0].style.display = 'none';
  document.querySelectorAll(".show-nav")[0].style.display = 'block';
  document.querySelectorAll(".hide-nav")[0].style.display = 'none';
});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-51086297-1', 'fluxxor.com');
  ga('require', 'displayfeatures');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>
<script>
  function appendAnchorSymbol(el, id) {
    var anchor = document.createElement("a");
    anchor.setAttribute("href", "#" + id);
    anchor.setAttribute("class", "anchor-symbol");
    anchor.innerHTML = "&para;";
    el.appendChild(anchor);
  }

  var hs = document.querySelectorAll("h1,h2,h3,h4,h5,h6"),
      h, id;
  for (var i = 0; i < hs.length; i++) {
    h = hs[i];
    id = h.getAttribute("id");
    if (id) {
      appendAnchorSymbol(h, id);
    }
  }
</script>

</html>
